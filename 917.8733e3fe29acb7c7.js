"use strict";(self.webpackChunkskote=self.webpackChunkskote||[]).push([[917],{54917:(C,d,r)=>{r.r(d),r.d(d,{EntiteExterneDashboardModule:()=>v});var c=r(69808),s=r(84490),e=r(5e3),u=r(38920),p=r(97647),_=r(5829),g=r(28675);function E(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"li",12),e.\u0275\u0275elementStart(1,"div",13),e.\u0275\u0275elementStart(2,"div",14),e.\u0275\u0275elementStart(3,"h4",15),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",16),e.\u0275\u0275elementStart(6,"p",17),e.\u0275\u0275elementStart(7,"b"),e.\u0275\u0275text(8,"Corps : "),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"p",18),e.\u0275\u0275elementStart(11,"b"),e.\u0275\u0275text(12,"Envoy\xe9e le : "),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(13),e.\u0275\u0275pipe(14,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",19),e.\u0275\u0275elementStart(16,"div"),e.\u0275\u0275elementStart(17,"button",20),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().deleteReclamation(i)}),e.\u0275\u0275text(18,"Supprimer"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"button",21),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit,m=e.\u0275\u0275nextContext(),f=e.\u0275\u0275reference(16);return m.getSender(i.senderId,f)}),e.\u0275\u0275text(20,"Afficher l'\xe9metteur"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&n){const t=a.$implicit;e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("Type de r\xe9clamation : ","equ"==t.type?"\xc9quipements et services publics":"urba"==t.type?"Urbanisme et construction":"budg"==t.type?"Budget, affaires financi\xe8res et programmation":"coop"==t.type?"Coop\xe9ration et partenariat":"Autre",""),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.message),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(14,3,t.sentAt,"short"),"")}}function h(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",22),e.\u0275\u0275elementStart(1,"i",23),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t).$implicit.dismiss("Cross click")}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"div",24),e.\u0275\u0275elementStart(3,"div",25),e.\u0275\u0275elementStart(4,"div",26),e.\u0275\u0275elementStart(5,"div",27),e.\u0275\u0275elementStart(6,"div",28),e.\u0275\u0275elementStart(7,"h6",29),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",30),e.\u0275\u0275elementStart(10,"div",31),e.\u0275\u0275elementStart(11,"h6",32),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"ul",33),e.\u0275\u0275elementStart(14,"li"),e.\u0275\u0275elementStart(15,"span",34),e.\u0275\u0275text(16,"Nom"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(17," : "),e.\u0275\u0275elementStart(18,"span",35),e.\u0275\u0275text(19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"li"),e.\u0275\u0275elementStart(21,"span",34),e.\u0275\u0275text(22,"Pr\xe9nom"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(23," : "),e.\u0275\u0275elementStart(24,"span",35),e.\u0275\u0275text(25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"li"),e.\u0275\u0275elementStart(27,"span",34),e.\u0275\u0275text(28,"Email"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(29," : "),e.\u0275\u0275elementStart(30,"span",35),e.\u0275\u0275text(31),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"div",36),e.\u0275\u0275elementStart(33,"button",37),e.\u0275\u0275text(34,"Supprimer le compte"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(35,"div"),e.\u0275\u0275element(36,"div"),e.\u0275\u0275element(37,"div"),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate2("",t.user.lastName[0]," ",t.user.firstName[0],""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate2("",t.user.firstName," ",t.user.lastName,""),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(t.user.lastName),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.user.firstName),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.user.email)}}const b=[{path:"",component:(()=>{class n{constructor(t,o,l,i,m){this.router=t,this.authService=o,this.communicationService=l,this.socketService=i,this.modalService=m,this.reclamations=[],this.userModal=null}ngOnInit(){this.entiteId=this.socketService.sender,this.communicationService.reclamationsEntiteSubject.subscribe(t=>{this.reclamations=t,this.communicationService.userSUbject.subscribe(o=>{this.user=o,this.showModal(this.userModal)})}),this.communicationService.getInitialReclamationsEntiteExterne(),this.communicationService.singleReclamation.subscribe(t=>{this.reclamations.push(t)}),this.communicationService.getInitialReclamations()}showModal(t){this.modalService.open(t,{size:"md",windowClass:"modal-rounded",centered:!0})}onLogout(){this.authService.logoutEntiteExterne(),this.router.navigateByUrl("/account/loginEntiteExterne")}getSender(t,o){this.userModal=o,this.communicationService.getSender(t)}deleteReclamation(t){this.communicationService.deleteReclamation(t)}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(s.F0),e.\u0275\u0275directiveInject(u.BR),e.\u0275\u0275directiveInject(p.O),e.\u0275\u0275directiveInject(_.$),e.\u0275\u0275directiveInject(g.FF))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-entite-externe-dashboard"]],decls:17,vars:1,consts:[[1,"navbar"],[1,"navbar__logo"],["src","../../assets/logos/logo-app.png","alt","",1,"logo"],[1,"navbar__menu"],[1,"menu__link","btn","btn-primary","rounded-pill",2,"box-shadow","0 0.6rem 1.2rem rgba(0, 0, 0, 0.205)","padding","0.6rem 1rem !important",3,"click"],[1,"container"],[1,"pageTitle"],[1,"content"],[1,"content__list"],["class","content__element",4,"ngFor","ngForOf"],[1,"modal","modalgeotiffModal"],["newUser",""],[1,"content__element"],[1,"reclamation"],[1,"reclamation__header"],[1,"reclamation__type","mb-4"],[1,"reclamation__body"],[1,"reclamation__message","mb-3"],[1,"reclamation__sentAt","mb-3"],[1,"reclamation__footer"],[1,"btn","btn-danger","me-2",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"modal-header","bg-primary"],["type","button","aria-hidden","true",1,"bx","bx-x","text-light","ms-auto",2,"font-size","1.3rem !important",3,"click"],[1,"modal-body","p-0","m-0"],[1,"responsableAccount","account"],[1,"account__header","bg-primary"],[1,"avatar"],[1,"roundedImg--account","bg-dark"],[1,"name"],[1,"credentials"],[1,"clientCredentials"],[1,"credentials__name","text-primary"],[1,"credentials__list"],[1,"identifier","text-primary"],[1,"credentialsData"],[1,"actions","mb-3","ms-4"],[1,"btn","btn-danger","ms-2"]],template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275element(2,"img",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"ul"),e.\u0275\u0275elementStart(5,"li"),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275listener("click",function(){return o.onLogout()}),e.\u0275\u0275text(7,"Se d\xe9connecter"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",5),e.\u0275\u0275elementStart(9,"h2",6),e.\u0275\u0275text(10,"Espace r\xe9clamations"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",7),e.\u0275\u0275elementStart(12,"ul",8),e.\u0275\u0275template(13,E,21,6,"li",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",10),e.\u0275\u0275template(15,h,38,7,"ng-template",null,11,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(13),e.\u0275\u0275property("ngForOf",o.reclamations.reverse()))},directives:[c.NgForOf],pipes:[c.DatePipe],styles:[".navbar[_ngcontent-%COMP%]{padding:.6rem 6rem;transition:all .4s;z-index:999999999999;background-color:#1d2448}.navbar__logo[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:20%}.navbar__menu[_ngcontent-%COMP%]{color:#fff}.navbar__menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none}.navbar__menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-family:Raleway Light!important;display:inline-block;font-size:.9rem!important;padding-top:.8rem}.navbar__menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child){margin-right:2rem}.navbar__menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#f4f4f4;cursor:pointer;transition:all .4s;font-family:Raleway Light}.navbar__menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#7e94ff}.navbar__button[_ngcontent-%COMP%]{display:none}.pageTitle[_ngcontent-%COMP%]{padding-left:.7rem;margin:4% 0;border-left:4px solid #556ee6;font-family:Raleway Light;text-transform:uppercase;color:#556ee6;letter-spacing:.1rem}.content[_ngcontent-%COMP%]{height:62vh;border-radius:20px;box-shadow:0 .6rem .8rem #0003;padding:0}.content__list[_ngcontent-%COMP%]{height:62vh;list-style:none;overflow-y:auto}.content__list[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;background-color:#f0f0f0;border-radius:15px}.content__list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#b9b9b9;border-radius:15px}.content__element[_ngcontent-%COMP%]{margin:2rem}.content[_ngcontent-%COMP%]   .reclamation[_ngcontent-%COMP%]{padding:.6rem;border-radius:10px;box-shadow:0 .6rem .8rem #0003}.content[_ngcontent-%COMP%]   .reclamation__footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.account__header[_ngcontent-%COMP%]{position:relative;height:15vh;border-bottom:2px solid #ffff!important}.account__header[_ngcontent-%COMP%]   .roundedImg--account[_ngcontent-%COMP%]{width:5rem;height:5rem;position:relative;border-radius:80px;border:1px solid white;box-shadow:0 .7rem .7rem #0000002e}.account__header[_ngcontent-%COMP%]   .roundedImg--account[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-family:.5rem;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff}.avatar[_ngcontent-%COMP%]{width:auto;height:auto;position:absolute;top:55%;left:50%;transform:translate(-50%)}.modal-header[_ngcontent-%COMP%]{border:none!important}.modal-body[_ngcontent-%COMP%]{border:none}.credentials[_ngcontent-%COMP%]{margin:2.5rem 0}.credentials__name[_ngcontent-%COMP%]{text-align:center;font-size:1rem}.credentials__list[_ngcontent-%COMP%]{font-size:.8rem;list-style:none}.credentials__list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child){margin-bottom:1rem}.credentials__list[_ngcontent-%COMP%]   .identifier[_ngcontent-%COMP%]{font-weight:700}"]}),n})()}];let x=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[[s.Bz.forChild(b)],s.Bz]}),n})(),v=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[[c.CommonModule,x]]}),n})()}}]);